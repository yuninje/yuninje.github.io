---
# 3 :: 파일 이름 2019-12-05-XXXXXXX  
layout: post # 양식 
title: JPA Error # 1 :: 글제목
tags: [SpringBoot]  # 분류
---

- Episode
  - 에피소드 삭제
    - 사실
      - @Transactional
        - test method O
          - service method O
            ![eD_tO_sO](../img/2020-05-21-JPA-ERROR/episodeDelete_t=0_s=O.png)
          - service method X
            ![eD_tO_sX](../img/2020-05-21-JPA-ERROR/episodeDelete_t=0_s=X.png)
        - test method X
          - service method O
            ![eD_tX_sO](../img/2020-05-21-JPA-ERROR/episodeDelete_t=X_s=O.png)
          - service method X
            ![eD_tX_sX](../img/2020-05-21-JPA-ERROR/episodeDelete_t=X_s=X.png)
    - 결론
      - Service 에서의 `@Transactional`은 데이터의 무결성 때문에 사용.
      - test method 에서 `@Transactional`을 사용하지 않으면 `LazyInitializationException` 예외 발생
        - `LazyInitializationException` 발생 원인
          1. org.hibernate.exception.ConstraintViolationException : `Comment` 엔티티가 `Member`엔티티를 가지고 있을 때, `Comment` 엔티티를 삭제하지 않고 `Member` 엔티티를 삭제함.
          2. org.hibernate.PropertyValueException : 엔티티의 변수에 `nuallable = flase` 처리가 되어있지만 `null`값이 들어감.
          3. org.hibernate.exception.DataException
